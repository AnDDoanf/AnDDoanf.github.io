{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 87, "column": 0}, "map": {"version":3,"sources":["file:///C:/code/AnDDoanf/anddoanf/app/utils/getPostMetadata.js"],"sourcesContent":["import fs from \"fs\";\r\nimport matter from \"gray-matter\";\r\n\r\nfunction getExcerpt(markdown, maxLines = 2, maxWords = 20) { \r\n    let excerpt = markdown\r\n        .split(\"\\n\")\r\n        .map(line => line.trim())\r\n        .filter(line =>\r\n        line &&\r\n        !line.startsWith(\"#\") &&     // skip headings\r\n        !line.startsWith(\">\") &&     // skip blockquotes\r\n        !line.startsWith(\"```\")      // skip code blocks\r\n        )\r\n        .slice(0, maxLines)\r\n        .join(\" \")\r\n        .replace(/!\\[.*?\\]\\(.*?\\)/g, \"\") // remove images\r\n        .replace(/\\[([^\\]]+)\\]\\([^)]+\\)/g, \"$1\") // links â†’ text\r\n        .replace(/[`*_>#]/g, \"\") // basic markdown cleanup\r\n        .trim();\r\n    if (excerpt.split(\" \").length > maxWords) {\r\n        excerpt = excerpt.split(\" \").slice(0, maxWords).join(\" \") + \"...\";\r\n    }\r\n    \r\n    return excerpt\r\n}\r\n\r\n\r\nexport default function getPostMetadata(basePath) {\r\n    const folder = basePath + \"/\";\r\n    const files = fs.readdirSync(folder);\r\n    const markdownPosts = files.filter((file) => file.endsWith(\".md\"));\r\n\r\n    const now = new Date();\r\n\r\n    const posts = markdownPosts\r\n        .map((filename) => {\r\n            const fileContents = fs.readFileSync(`${basePath}/${filename}`, \"utf8\");\r\n            const {data, content} = matter(fileContents);\r\n\r\n            const rawDate = data.date;\r\n            const postDate = rawDate ? new Date(rawDate) : null;\r\n            return {\r\n                title: data.title,\r\n                date: postDate,\r\n                categories: data.categories || [],\r\n                tags: data.tags || [],\r\n                slug: filename.replace(\".md\", \"\"),\r\n                excerpt: getExcerpt(content, 1) || \"No excerpt available\",\r\n            };\r\n        })\r\n\r\n        .filter((post) => {\r\n            if (!post.date) return true; \r\n            return post.date <= now;\r\n        })\r\n        // optional: sort newest first\r\n        .sort((a, b) => {\r\n            if (!a.date || !b.date) return 0;\r\n            return b.date - a.date;\r\n        })\r\n        // format date for output\r\n        .map((post) => ({\r\n            ...post,\r\n            date: post.date\r\n                ? post.date.toISOString().split(\"T\")[0]\r\n                : \"No Date Added\",\r\n        }));\r\n\r\n    return posts;\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEA,SAAS,WAAW,QAAQ,EAAE,WAAW,CAAC,EAAE,WAAW,EAAE;IACrD,IAAI,UAAU,SACT,KAAK,CAAC,MACN,GAAG,CAAC,CAAA,OAAQ,KAAK,IAAI,IACrB,MAAM,CAAC,CAAA,OACR,QACA,CAAC,KAAK,UAAU,CAAC,QAAY,gBAAgB;QAC7C,CAAC,KAAK,UAAU,CAAC,QAAY,mBAAmB;QAChD,CAAC,KAAK,UAAU,CAAC,OAAY,mBAAmB;MAE/C,KAAK,CAAC,GAAG,UACT,IAAI,CAAC,KACL,OAAO,CAAC,oBAAoB,IAAI,gBAAgB;KAChD,OAAO,CAAC,0BAA0B,MAAM,eAAe;KACvD,OAAO,CAAC,YAAY,IAAI,yBAAyB;KACjD,IAAI;IACT,IAAI,QAAQ,KAAK,CAAC,KAAK,MAAM,GAAG,UAAU;QACtC,UAAU,QAAQ,KAAK,CAAC,KAAK,KAAK,CAAC,GAAG,UAAU,IAAI,CAAC,OAAO;IAChE;IAEA,OAAO;AACX;AAGe,SAAS,gBAAgB,QAAQ;IAC5C,MAAM,SAAS,WAAW;IAC1B,MAAM,QAAQ,wGAAE,CAAC,WAAW,CAAC;IAC7B,MAAM,gBAAgB,MAAM,MAAM,CAAC,CAAC,OAAS,KAAK,QAAQ,CAAC;IAE3D,MAAM,MAAM,IAAI;IAEhB,MAAM,QAAQ,cACT,GAAG,CAAC,CAAC;QACF,MAAM,eAAe,wGAAE,CAAC,YAAY,CAAC,GAAG,SAAS,CAAC,EAAE,UAAU,EAAE;QAChE,MAAM,EAAC,IAAI,EAAE,OAAO,EAAC,GAAG,IAAA,kJAAM,EAAC;QAE/B,MAAM,UAAU,KAAK,IAAI;QACzB,MAAM,WAAW,UAAU,IAAI,KAAK,WAAW;QAC/C,OAAO;YACH,OAAO,KAAK,KAAK;YACjB,MAAM;YACN,YAAY,KAAK,UAAU,IAAI,EAAE;YACjC,MAAM,KAAK,IAAI,IAAI,EAAE;YACrB,MAAM,SAAS,OAAO,CAAC,OAAO;YAC9B,SAAS,WAAW,SAAS,MAAM;QACvC;IACJ,GAEC,MAAM,CAAC,CAAC;QACL,IAAI,CAAC,KAAK,IAAI,EAAE,OAAO;QACvB,OAAO,KAAK,IAAI,IAAI;IACxB,EACA,8BAA8B;KAC7B,IAAI,CAAC,CAAC,GAAG;QACN,IAAI,CAAC,EAAE,IAAI,IAAI,CAAC,EAAE,IAAI,EAAE,OAAO;QAC/B,OAAO,EAAE,IAAI,GAAG,EAAE,IAAI;IAC1B,EACA,yBAAyB;KACxB,GAAG,CAAC,CAAC,OAAS,CAAC;YACZ,GAAG,IAAI;YACP,MAAM,KAAK,IAAI,GACT,KAAK,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE,GACrC;QACV,CAAC;IAEL,OAAO;AACX"}},
    {"offset": {"line": 144, "column": 0}, "map": {"version":3,"sources":["file:///C:/code/AnDDoanf/anddoanf/app/blog/%5Bslug%5D/page.jsx"],"sourcesContent":["import fs from \"fs\";\r\nimport matter from \"gray-matter\";\r\nimport ReactMarkdown from \"react-markdown\";\r\nimport remarkGfm from \"remark-gfm\";\r\nimport getPostMetadata from \"@/app/utils/getPostMetadata\";\r\nimport ScrollToTop from \"@/components/ui/ScrollToTop\";\r\nimport { notFound } from \"next/navigation\";\r\n\r\nfunction extractHeadings(markdown) {\r\n  return markdown\r\n    .split(\"\\n\")\r\n    .filter(line => line.startsWith(\"## \") || line.startsWith(\"### \"))\r\n    .map(line => {\r\n      const level = line.startsWith(\"### \") ? 3 : 2;\r\n      const text = line.replace(/^#{2,3}\\s+/, \"\").replaceAll(\"*\", \"\").trim();\r\n      const id = text\r\n        .toLowerCase()\r\n        .replace(/[^\\w]+/g, \"-\")\r\n        .replace(/(^-|-$)/g, \"\");\r\n\r\n      return { text, id, level };\r\n    });\r\n}\r\n\r\n\r\nfunction getPostContent(slug) {\r\n  const file = `data/blog_posts/${slug}.md`;\r\n\r\n  if (!slug || !fs.existsSync(file)) {\r\n    notFound();\r\n  }\r\n\r\n  return matter(fs.readFileSync(file, \"utf-8\"));\r\n}\r\n\r\nexport async function generateStaticParams() {\r\n  const posts = getPostMetadata(\"data/blog_posts\");\r\n  return posts.map((post) => ({ slug: post.slug }));\r\n}\r\n\r\nexport async function generateMetadata({ params }) {\r\n  const { slug } = await params;\r\n  return {\r\n    title: slug.replaceAll(\"-\", \" \"),\r\n  };\r\n}\r\n\r\nexport default async function BlogPostPage({ params }) {\r\n  const { slug } = await params;\r\n  const post = getPostContent(slug);\r\n\r\n  const headings = extractHeadings(post.content);\r\n\r\n  return (\r\n    <main className=\"post-layout\">\r\n      {/* Article */}\r\n      <article className=\"post-content\">\r\n        <ReactMarkdown\r\n          remarkPlugins={[remarkGfm]}\r\n          components={{\r\n            h2: ({ children }) => {\r\n              const text = String(children);\r\n              const id = text\r\n                .toLowerCase()\r\n                .replace(/[^\\w]+/g, \"-\")\r\n                .replace(/(^-|-$)/g, \"\");\r\n\r\n              return <h2 id={id}>{children}</h2>;\r\n            },\r\n            h3: ({ children }) => {\r\n              const text = String(children);\r\n              const id = text\r\n                .toLowerCase()\r\n                .replace(/[^\\w]+/g, \"-\")\r\n                .replace(/(^-|-$)/g, \"\");\r\n\r\n              return <h3 id={id}>{children}</h3>;\r\n            },\r\n          }}\r\n        >\r\n          {post.content}\r\n        </ReactMarkdown>\r\n\r\n        <ScrollToTop />\r\n      </article>\r\n\r\n      {/* Sidebar */}\r\n      {headings.length > 0 && (\r\n        <aside className=\"toc\">\r\n          <p className=\"toc-title\">On this page</p>\r\n          <ul>\r\n            {headings.map(h => (\r\n              <li\r\n                key={h.id}\r\n                className={h.level === 3 ? \"toc-sub\" : \"\"}\r\n              >\r\n                <a href={`#${h.id}`}>{h.text}</a>\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        </aside>\r\n      )}\r\n    </main>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;;;;;;;;;AAEA,SAAS,gBAAgB,QAAQ;IAC/B,OAAO,SACJ,KAAK,CAAC,MACN,MAAM,CAAC,CAAA,OAAQ,KAAK,UAAU,CAAC,UAAU,KAAK,UAAU,CAAC,SACzD,GAAG,CAAC,CAAA;QACH,MAAM,QAAQ,KAAK,UAAU,CAAC,UAAU,IAAI;QAC5C,MAAM,OAAO,KAAK,OAAO,CAAC,cAAc,IAAI,UAAU,CAAC,KAAK,IAAI,IAAI;QACpE,MAAM,KAAK,KACR,WAAW,GACX,OAAO,CAAC,WAAW,KACnB,OAAO,CAAC,YAAY;QAEvB,OAAO;YAAE;YAAM;YAAI;QAAM;IAC3B;AACJ;AAGA,SAAS,eAAe,IAAI;IAC1B,MAAM,OAAO,CAAC,gBAAgB,EAAE,KAAK,GAAG,CAAC;IAEzC,IAAI,CAAC,QAAQ,CAAC,wGAAE,CAAC,UAAU,CAAC,OAAO;QACjC,IAAA,iMAAQ;IACV;IAEA,OAAO,IAAA,kJAAM,EAAC,wGAAE,CAAC,YAAY,CAAC,MAAM;AACtC;AAEO,eAAe;IACpB,MAAM,QAAQ,IAAA,0IAAe,EAAC;IAC9B,OAAO,MAAM,GAAG,CAAC,CAAC,OAAS,CAAC;YAAE,MAAM,KAAK,IAAI;QAAC,CAAC;AACjD;AAEO,eAAe,iBAAiB,EAAE,MAAM,EAAE;IAC/C,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM;IACvB,OAAO;QACL,OAAO,KAAK,UAAU,CAAC,KAAK;IAC9B;AACF;AAEe,eAAe,aAAa,EAAE,MAAM,EAAE;IACnD,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM;IACvB,MAAM,OAAO,eAAe;IAE5B,MAAM,WAAW,gBAAgB,KAAK,OAAO;IAE7C,qBACE,8OAAC;QAAK,WAAU;;0BAEd,8OAAC;gBAAQ,WAAU;;kCACjB,8OAAC,mMAAa;wBACZ,eAAe;4BAAC,wJAAS;yBAAC;wBAC1B,YAAY;4BACV,IAAI,CAAC,EAAE,QAAQ,EAAE;gCACf,MAAM,OAAO,OAAO;gCACpB,MAAM,KAAK,KACR,WAAW,GACX,OAAO,CAAC,WAAW,KACnB,OAAO,CAAC,YAAY;gCAEvB,qBAAO,8OAAC;oCAAG,IAAI;8CAAK;;;;;;4BACtB;4BACA,IAAI,CAAC,EAAE,QAAQ,EAAE;gCACf,MAAM,OAAO,OAAO;gCACpB,MAAM,KAAK,KACR,WAAW,GACX,OAAO,CAAC,WAAW,KACnB,OAAO,CAAC,YAAY;gCAEvB,qBAAO,8OAAC;oCAAG,IAAI;8CAAK;;;;;;4BACtB;wBACF;kCAEC,KAAK,OAAO;;;;;;kCAGf,8OAAC,2IAAW;;;;;;;;;;;YAIb,SAAS,MAAM,GAAG,mBACjB,8OAAC;gBAAM,WAAU;;kCACf,8OAAC;wBAAE,WAAU;kCAAY;;;;;;kCACzB,8OAAC;kCACE,SAAS,GAAG,CAAC,CAAA,kBACZ,8OAAC;gCAEC,WAAW,EAAE,KAAK,KAAK,IAAI,YAAY;0CAEvC,cAAA,8OAAC;oCAAE,MAAM,CAAC,CAAC,EAAE,EAAE,EAAE,EAAE;8CAAG,EAAE,IAAI;;;;;;+BAHvB,EAAE,EAAE;;;;;;;;;;;;;;;;;;;;;;AAWzB"}}]
}