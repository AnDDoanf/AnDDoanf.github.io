{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 91, "column": 0}, "map": {"version":3,"sources":["file:///C:/code/AnDDoanf/anddoanf/app/utils/getPoemMetadata.js"],"sourcesContent":["import fs from \"fs\";\r\nimport matter from \"gray-matter\";\r\n\r\nfunction extractExcerpt(content, maxWords = 12) {\r\n    const text = content\r\n        .replace(/[#>*_`]/g, \"\")\r\n        .replace(/\\n+/g, \" \")\r\n        .trim();\r\n\r\n    return text.split(\" \").slice(0, maxWords).join(\" \");\r\n}\r\n\r\nexport default function getPoemMetadata(basePath) {\r\n    const files = fs.readdirSync(basePath).filter(f => f.endsWith(\".md\"));\r\n    const now = new Date();\r\n\r\n    const poems = files\r\n        .map((filename) => {\r\n        const file = fs.readFileSync(`${basePath}/${filename}`, \"utf8\");\r\n        const { data, content } = matter(file);\r\n        const poemDate = data.date ? new Date(data.date) : null;\r\n        console.log('showing time: ' + (poemDate));\r\n        return {\r\n            title: data.title,\r\n            date: poemDate,\r\n            slug: filename.replace(\".md\", \"\"),\r\n            excerpt: extractExcerpt(content),\r\n        };\r\n        })\r\n        .filter((poem) => {\r\n            if (!poem.date) return true; \r\n            return poem.date <= now;\r\n        })\r\n        .sort((a, b) => {\r\n            if (!a.date || !b.date) return 0;\r\n            return b.date - a.date;\r\n        })\r\n        .map((poem) => ({\r\n            ...poem,\r\n            date: poem.date\r\n                ? poem.date.toISOString().split(\"T\")[0]\r\n                : \"No Date Added\",\r\n        }));\r\n    return poems;\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEA,SAAS,eAAe,OAAO,EAAE,WAAW,EAAE;IAC1C,MAAM,OAAO,QACR,OAAO,CAAC,YAAY,IACpB,OAAO,CAAC,QAAQ,KAChB,IAAI;IAET,OAAO,KAAK,KAAK,CAAC,KAAK,KAAK,CAAC,GAAG,UAAU,IAAI,CAAC;AACnD;AAEe,SAAS,gBAAgB,QAAQ;IAC5C,MAAM,QAAQ,wGAAE,CAAC,WAAW,CAAC,UAAU,MAAM,CAAC,CAAA,IAAK,EAAE,QAAQ,CAAC;IAC9D,MAAM,MAAM,IAAI;IAEhB,MAAM,QAAQ,MACT,GAAG,CAAC,CAAC;QACN,MAAM,OAAO,wGAAE,CAAC,YAAY,CAAC,GAAG,SAAS,CAAC,EAAE,UAAU,EAAE;QACxD,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,GAAG,IAAA,kJAAM,EAAC;QACjC,MAAM,WAAW,KAAK,IAAI,GAAG,IAAI,KAAK,KAAK,IAAI,IAAI;QACnD,QAAQ,GAAG,CAAC,mBAAoB;QAChC,OAAO;YACH,OAAO,KAAK,KAAK;YACjB,MAAM;YACN,MAAM,SAAS,OAAO,CAAC,OAAO;YAC9B,SAAS,eAAe;QAC5B;IACA,GACC,MAAM,CAAC,CAAC;QACL,IAAI,CAAC,KAAK,IAAI,EAAE,OAAO;QACvB,OAAO,KAAK,IAAI,IAAI;IACxB,GACC,IAAI,CAAC,CAAC,GAAG;QACN,IAAI,CAAC,EAAE,IAAI,IAAI,CAAC,EAAE,IAAI,EAAE,OAAO;QAC/B,OAAO,EAAE,IAAI,GAAG,EAAE,IAAI;IAC1B,GACC,GAAG,CAAC,CAAC,OAAS,CAAC;YACZ,GAAG,IAAI;YACP,MAAM,KAAK,IAAI,GACT,KAAK,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE,GACrC;QACV,CAAC;IACL,OAAO;AACX"}},
    {"offset": {"line": 133, "column": 0}, "map": {"version":3,"sources":["file:///C:/code/AnDDoanf/anddoanf/app/%28with-nav%29/poetry/%5Bslug%5D/page.jsx"],"sourcesContent":["import fs from \"fs\";\r\nimport matter from \"gray-matter\";\r\nimport ReactMarkdown from \"react-markdown\";\r\nimport remarkGfm from \"remark-gfm\";\r\nimport { notFound } from \"next/navigation\";\r\nimport getPoemMetadata from \"@/app/utils/getPoemMetadata\";\r\n\r\nfunction getPoem(slug) {\r\n    const path = `data/poems/${slug}.md`;\r\n\r\n    if (!fs.existsSync(path)) notFound();\r\n\r\n    return matter(fs.readFileSync(path, \"utf8\"));\r\n}\r\n\r\nexport async function generateStaticParams() {\r\n    const poems = getPoemMetadata(\"data/poems\");\r\n    return poems.map(p => ({ slug: p.slug }));\r\n}\r\n\r\nexport default async function PoemPage({ params }) {\r\n    const { slug } = await params;\r\n    const poem = getPoem(slug);\r\n\r\n    return (\r\n        <article className=\"post-content poetry\">\r\n        <h1>{poem.data.title}</h1>\r\n\r\n        <ReactMarkdown remarkPlugins={[remarkGfm]}>\r\n            {poem.content}\r\n        </ReactMarkdown>\r\n        </article>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;;;;;;;;AAEA,SAAS,QAAQ,IAAI;IACjB,MAAM,OAAO,CAAC,WAAW,EAAE,KAAK,GAAG,CAAC;IAEpC,IAAI,CAAC,wGAAE,CAAC,UAAU,CAAC,OAAO,IAAA,iMAAQ;IAElC,OAAO,IAAA,kJAAM,EAAC,wGAAE,CAAC,YAAY,CAAC,MAAM;AACxC;AAEO,eAAe;IAClB,MAAM,QAAQ,IAAA,0IAAe,EAAC;IAC9B,OAAO,MAAM,GAAG,CAAC,CAAA,IAAK,CAAC;YAAE,MAAM,EAAE,IAAI;QAAC,CAAC;AAC3C;AAEe,eAAe,SAAS,EAAE,MAAM,EAAE;IAC7C,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM;IACvB,MAAM,OAAO,QAAQ;IAErB,qBACI,8OAAC;QAAQ,WAAU;;0BACnB,8OAAC;0BAAI,KAAK,IAAI,CAAC,KAAK;;;;;;0BAEpB,8OAAC,mMAAa;gBAAC,eAAe;oBAAC,wJAAS;iBAAC;0BACpC,KAAK,OAAO;;;;;;;;;;;;AAIzB"}}]
}