{"version":3,"sources":["../../../../app/utils/getPostMetadata.js","../../../../app/%28with-nav%29/blog/%5Bslug%5D/page.jsx"],"sourcesContent":["import fs from \"fs\";\r\nimport matter from \"gray-matter\";\r\n\r\nfunction getExcerpt(markdown, maxLines = 2, maxWords = 20) { \r\n    let excerpt = markdown\r\n        .split(\"\\n\")\r\n        .map(line => line.trim())\r\n        .filter(line =>\r\n        line &&\r\n        !line.startsWith(\"#\") &&     // skip headings\r\n        !line.startsWith(\">\") &&     // skip blockquotes\r\n        !line.startsWith(\"```\")      // skip code blocks\r\n        )\r\n        .slice(0, maxLines)\r\n        .join(\" \")\r\n        .replace(/!\\[.*?\\]\\(.*?\\)/g, \"\") // remove images\r\n        .replace(/\\[([^\\]]+)\\]\\([^)]+\\)/g, \"$1\") // links â†’ text\r\n        .replace(/[`*_>#]/g, \"\") // basic markdown cleanup\r\n        .trim();\r\n    if (excerpt.split(\" \").length > maxWords) {\r\n        excerpt = excerpt.split(\" \").slice(0, maxWords).join(\" \") + \"...\";\r\n    }\r\n    \r\n    return excerpt\r\n}\r\n\r\n\r\nexport default function getPostMetadata(basePath) {\r\n    const folder = basePath + \"/\";\r\n    const files = fs.readdirSync(folder);\r\n    const markdownPosts = files.filter((file) => file.endsWith(\".md\"));\r\n\r\n    const now = new Date();\r\n\r\n    const posts = markdownPosts\r\n        .map((filename) => {\r\n            const fileContents = fs.readFileSync(`${basePath}/${filename}`, \"utf8\");\r\n            const {data, content} = matter(fileContents);\r\n\r\n            const rawDate = data.date;\r\n            const postDate = rawDate ? new Date(rawDate) : null;\r\n            return {\r\n                title: data.title,\r\n                date: postDate,\r\n                categories: data.categories || [],\r\n                tags: data.tags || [],\r\n                slug: filename.replace(\".md\", \"\"),\r\n                excerpt: getExcerpt(content, 1) || \"No excerpt available\",\r\n            };\r\n        })\r\n\r\n        .filter((post) => {\r\n            if (!post.date) return true; \r\n            return post.date <= now;\r\n        })\r\n        // optional: sort newest first\r\n        .sort((a, b) => {\r\n            if (!a.date || !b.date) return 0;\r\n            return b.date - a.date;\r\n        })\r\n        // format date for output\r\n        .map((post) => ({\r\n            ...post,\r\n            date: post.date\r\n                ? post.date.toISOString().split(\"T\")[0]\r\n                : \"No Date Added\",\r\n        }));\r\n\r\n    return posts;\r\n}\r\n","import fs from \"fs\";\r\nimport matter from \"gray-matter\";\r\nimport ReactMarkdown from \"react-markdown\";\r\nimport remarkGfm from \"remark-gfm\";\r\nimport getPostMetadata from \"@/app/utils/getPostMetadata\";\r\nimport ScrollToTop from \"@/components/ui/ScrollToTop\";\r\nimport { notFound } from \"next/navigation\";\r\n\r\nfunction extractHeadings(markdown) {\r\n  return markdown\r\n    .split(\"\\n\")\r\n    .filter(line => line.startsWith(\"## \") || line.startsWith(\"### \"))\r\n    .map(line => {\r\n      const level = line.startsWith(\"### \") ? 3 : 2;\r\n      const text = line.replace(/^#{2,3}\\s+/, \"\").replaceAll(\"*\", \"\").trim();\r\n      const id = text\r\n        .toLowerCase()\r\n        .replace(/[^\\w]+/g, \"-\")\r\n        .replace(/(^-|-$)/g, \"\");\r\n\r\n      return { text, id, level };\r\n    });\r\n}\r\n\r\n\r\nfunction getPostContent(slug) {\r\n  const file = `data/blog_posts/${slug}.md`;\r\n\r\n  if (!slug || !fs.existsSync(file)) {\r\n    notFound();\r\n  }\r\n\r\n  return matter(fs.readFileSync(file, \"utf-8\"));\r\n}\r\n\r\nexport async function generateStaticParams() {\r\n  const posts = getPostMetadata(\"data/blog_posts\");\r\n  return posts.map((post) => ({ slug: post.slug }));\r\n}\r\n\r\nexport async function generateMetadata({ params }) {\r\n  const { slug } = await params;\r\n  return {\r\n    title: slug.replaceAll(\"-\", \" \"),\r\n  };\r\n}\r\n\r\nexport default async function BlogPostPage({ params }) {\r\n  const { slug } = await params;\r\n  const post = getPostContent(slug);\r\n\r\n  const headings = extractHeadings(post.content);\r\n\r\n  return (\r\n    <main className=\"post-layout\">\r\n      {/* Article */}\r\n      <article className=\"post-content\">\r\n        <h1>{post.data.title}</h1>\r\n        <ReactMarkdown\r\n          remarkPlugins={[remarkGfm]}\r\n          components={{\r\n            h2: ({ children }) => {\r\n              const text = String(children);\r\n              const id = text\r\n                .toLowerCase()\r\n                .replace(/[^\\w]+/g, \"-\")\r\n                .replace(/(^-|-$)/g, \"\");\r\n\r\n              return <h2 id={id}>{children}</h2>;\r\n            },\r\n            h3: ({ children }) => {\r\n              const text = String(children);\r\n              const id = text\r\n                .toLowerCase()\r\n                .replace(/[^\\w]+/g, \"-\")\r\n                .replace(/(^-|-$)/g, \"\");\r\n\r\n              return <h3 id={id}>{children}</h3>;\r\n            },\r\n          }}\r\n        >\r\n          {post.content}\r\n        </ReactMarkdown>\r\n\r\n        <ScrollToTop />\r\n      </article>\r\n\r\n      {/* Sidebar */}\r\n      {headings.length > 0 && (\r\n        <aside className=\"toc\">\r\n          <p className=\"toc-title\">On this page</p>\r\n          <ul>\r\n            {headings.map(h => (\r\n              <li\r\n                key={h.id}\r\n                className={h.level === 3 ? \"toc-sub\" : \"\"}\r\n              >\r\n                <a href={`#${h.id}`}>{h.text}</a>\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        </aside>\r\n      )}\r\n    </main>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":"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"}